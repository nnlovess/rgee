<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert an sf object to an EE object — sf_as_ee • rgee</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Convert an sf object to an EE object — sf_as_ee" />
<meta property="og:description" content="Load an sf object to Earth Engine." />
<meta property="og:image" content="http://r-spatial.github.io/rgee/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rgee</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/setup.html">Setup and details</a>
    </li>
    <li>
      <a href="../articles/considerations.html">Consideration</a>
    </li>
    <li>
      <a href="../articles/BestPractices.html">Best Practices</a>
    </li>
    <li>
      <a href="http://csaybar.github.io/rgee-examples/">rgee examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/r-spatial/rgee/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert an sf object to an EE object</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-spatial/rgee/blob/master/R/sf_as_ee.R'><code>R/sf_as_ee.R</code></a></small>
    <div class="hidden name"><code>sf_as_ee.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Load an sf object to Earth Engine.</p>
    </div>

    <pre class="usage"><span class='fu'>sf_as_ee</span><span class='op'>(</span>
  <span class='va'>x</span>,
  via <span class='op'>=</span> <span class='st'>"getInfo"</span>,
  assetId <span class='op'>=</span> <span class='cn'>NULL</span>,
  bucket <span class='op'>=</span> <span class='cn'>NULL</span>,
  command_line_tool_path <span class='op'>=</span> <span class='cn'>NULL</span>,
  overwrite <span class='op'>=</span> <span class='cn'>TRUE</span>,
  monitoring <span class='op'>=</span> <span class='cn'>TRUE</span>,
  proj <span class='op'>=</span> <span class='st'>"EPSG:4326"</span>,
  evenOdd <span class='op'>=</span> <span class='cn'>TRUE</span>,
  geodesic <span class='op'>=</span> <span class='cn'>NULL</span>,
  quiet <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>object of class sf, sfc or sfg.</p></td>
    </tr>
    <tr>
      <th>via</th>
      <td><p>Character. Upload method for sf objects. Three methods are
implemented: 'getInfo', 'getInfo_to_asset' and 'gcs_to_asset'. See details.</p></td>
    </tr>
    <tr>
      <th>assetId</th>
      <td><p>Character. Destination asset ID for the uploaded file. Ignore
if <code>via</code> argument is "getInfo".</p></td>
    </tr>
    <tr>
      <th>bucket</th>
      <td><p>Character. Name of the bucket (GCS) to save intermediate files
(ignore if <code>via</code> is not defined as "gcs_to_asset").</p></td>
    </tr>
    <tr>
      <th>command_line_tool_path</th>
      <td><p>Character. Path to the Earth Engine command line
tool (CLT). If NULL, rgee assumes that CLT is set in the system PATH.
(ignore if <code>via</code> is not defined as "gcs_to_asset").</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>A boolean argument which indicates indicating
whether "filename" should be overwritten. Ignore if <code>via</code> argument
is "getInfo". By default TRUE.</p></td>
    </tr>
    <tr>
      <th>monitoring</th>
      <td><p>Logical. Ignore if via is not set as
<code>getInfo_to_asset</code> or <code>gcs_to_asset</code>. If TRUE the exportation task
will be monitored.</p></td>
    </tr>
    <tr>
      <th>proj</th>
      <td><p>Integer or character. Coordinate Reference System (CRS) for the
EE object, defaults to "EPSG:4326" (x=longitude, y=latitude).</p></td>
    </tr>
    <tr>
      <th>evenOdd</th>
      <td><p>Logical. Ignored if <code>x</code> is not a Polygon. If TRUE,
polygon interiors will be determined by the even/odd rule, where a point
is inside if it crosses an odd number of edges to reach a point at infinity.
Otherwise polygons use the left-inside rule, where interiors are on the
left side of the shell's edges when walking the vertices in the given order.
If unspecified, defaults to TRUE.</p></td>
    </tr>
    <tr>
      <th>geodesic</th>
      <td><p>Logical. Ignored if <code>x</code> is not a Polygon or LineString.
Whether line segments should be interpreted as spherical geodesics. If
FALSE, indicates that line segments should be interpreted as planar lines
in the specified CRS. If absent, defaults to TRUE if the CRS is geographic
(including the default EPSG:4326), or to FALSE if the CRS is projected.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>Logical. Suppress info message.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p><code><a href='ee_utils_create_manifest_table.html'>ee_utils_create_manifest_table</a></code> arguments might be included.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>When <code>via</code> is "getInfo" and <code>x</code> is either an sf or sfc object
with multiple geometries will return an <code>ee$FeatureCollection</code>. For
single sfc and sfg objects will return an <code>ee$Geometry$...</code>.</p>
<p>If <code>via</code> is either "getInfo_to_asset" or "gcs_to_asset" always will
return an <code>ee$FeatureCollection</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>sf_as_ee</code> supports the upload of <code>sf</code> objects by three different
options: "getInfo" (default), "getInfo_to_asset", and "gcs_to_asset". <code>getInfo</code>
transforms sf objects (sfg, sfc, or sf) to GeoJSON (using <code>geojsonio::geojson_json</code>)
and then encrusted them in an HTTP request using the server-side objects that are
implemented in the Earth Engine API (i.e. ee$Geometry$...). If the sf object is too
large (~ &gt;1Mb) is likely to cause bottlenecks since it is a temporary
file that is not saved in your EE Assets (server-side). The second option implemented
is 'getInfo_to_asset'. It is similar to the previous one, with the difference
that after create the server-side object will save it in your Earth Engine
Assets. For dealing with very large spatial objects is preferable to use the
third option 'gcs_to_asset'. This option firstly saves the sf object as a *.shp
file in the /temp directory. Secondly, using the function <code>local_to_gcs</code>
will move the shapefile from local to Google Cloud Storage. Finally, using
the function <code>gcs_to_ee_table</code> the ESRI shapefile will be loaded
to their EE Assets. See <a href='https://developers.google.com/earth-engine/importing'>Importing
table data</a> documentation for more details.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/r-spatial/rgee'>rgee</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>sf</span><span class='op'>)</span>
<span class='fu'><a href='ee_Initialize.html'>ee_Initialize</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='co'># 1. Handling geometry parameters</span>
<span class='co'># Simple</span>
<span class='va'>ee_x</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"shape/nc.shp"</span>, package <span class='op'>=</span> <span class='st'>"sf"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>sf_as_ee</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>Map</span><span class='op'>$</span><span class='fu'>centerObject</span><span class='op'>(</span>eeObject <span class='op'>=</span> <span class='va'>ee_x</span><span class='op'>)</span>
<span class='va'>Map</span><span class='op'>$</span><span class='fu'>addLayer</span><span class='op'>(</span><span class='va'>ee_x</span><span class='op'>)</span>

<span class='co'># Create a right-inside polygon.</span>
<span class='va'>toy_poly</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>35</span>,<span class='op'>-</span><span class='fl'>10</span>,<span class='op'>-</span><span class='fl'>35</span>,<span class='fl'>10</span>,<span class='fl'>35</span>,<span class='fl'>10</span>,<span class='fl'>35</span>,<span class='op'>-</span><span class='fl'>10</span>,<span class='op'>-</span><span class='fl'>35</span>,<span class='op'>-</span><span class='fl'>10</span><span class='op'>)</span>,
                   ncol <span class='op'>=</span> <span class='fl'>2</span>,
                   byrow <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_polygon</span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>holePoly</span> <span class='op'>&lt;-</span> <span class='fu'>sf_as_ee</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>toy_poly</span>, evenOdd <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># Create an even-odd version of the polygon.</span>
<span class='va'>evenOddPoly</span> <span class='op'>&lt;-</span> <span class='fu'>sf_as_ee</span><span class='op'>(</span><span class='va'>toy_poly</span>, evenOdd <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># Create a point to test the insideness of the polygon.</span>
<span class='va'>pt</span> <span class='op'>&lt;-</span> <span class='va'>ee</span><span class='op'>$</span><span class='va'>Geometry</span><span class='op'>$</span><span class='fu'>Point</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1.5</span>, <span class='fl'>1.5</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Check insideness with a contains operator.</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>holePoly</span><span class='op'>$</span><span class='fu'>contains</span><span class='op'>(</span><span class='va'>pt</span><span class='op'>)</span><span class='op'>$</span><span class='fu'>getInfo</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='ee_utils_py_to_r.html'>ee_utils_py_to_r</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>evenOddPoly</span><span class='op'>$</span><span class='fu'>contains</span><span class='op'>(</span><span class='va'>pt</span><span class='op'>)</span><span class='op'>$</span><span class='fu'>getInfo</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='ee_utils_py_to_r.html'>ee_utils_py_to_r</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># # 2. Upload small geometries to EE asset</span>
<span class='co'># assetId &lt;- sprintf("%s/%s", ee_get_assethome(), 'toy_poly')</span>
<span class='co'># eex &lt;- sf_as_ee(</span>
<span class='co'>#   x = toy_poly,</span>
<span class='co'>#   overwrite = TRUE,</span>
<span class='co'>#   assetId = assetId,</span>
<span class='co'>#   via = "getInfo_to_asset")</span>
<span class='co'># # 3. Upload large geometries to EE asset</span>
<span class='co'># ee_Initialize(gcs = TRUE)</span>
<span class='co'># assetId &lt;- sprintf("%s/%s", ee_get_assethome(), 'toy_poly_gcs')</span>
<span class='co'>#  eex &lt;- sf_as_ee(</span>
<span class='co'>#  x = toy_poly,</span>
<span class='co'>#  overwrite = TRUE,</span>
<span class='co'>#  assetId = assetId,</span>
<span class='co'>#  bucket = 'rgee_dev',</span>
<span class='co'>#  monitoring = FALSE,</span>
<span class='co'>#  via = 'gcs_to_asset'</span>
<span class='co'>#  )</span>
<span class='co'># ee_monitoring()</span>
<span class='op'>}</span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Cesar Aybar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


