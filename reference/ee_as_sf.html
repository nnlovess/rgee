<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert an Earth Engine table in a sf object — ee_as_sf • rgee</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Convert an Earth Engine table in a sf object — ee_as_sf" />
<meta property="og:description" content="Convert an Earth Engine table in a sf object" />
<meta property="og:image" content="http://r-spatial.github.io/rgee/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rgee</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/setup.html">Setup and details</a>
    </li>
    <li>
      <a href="../articles/considerations.html">Consideration</a>
    </li>
    <li>
      <a href="../articles/BestPractices.html">Best Practices</a>
    </li>
    <li>
      <a href="http://csaybar.github.io/rgee-examples/">rgee examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/r-spatial/rgee/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert an Earth Engine table in a sf object</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-spatial/rgee/blob/master/R/ee_as_sf.R'><code>R/ee_as_sf.R</code></a></small>
    <div class="hidden name"><code>ee_as_sf.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Convert an Earth Engine table in a sf object</p>
    </div>

    <pre class="usage"><span class='fu'>ee_as_sf</span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>dsn</span>,
  overwrite <span class='op'>=</span> <span class='cn'>TRUE</span>,
  crs <span class='op'>=</span> <span class='cn'>NULL</span>,
  via <span class='op'>=</span> <span class='st'>"getInfo"</span>,
  maxFeatures <span class='op'>=</span> <span class='fl'>5000</span>,
  container <span class='op'>=</span> <span class='st'>"rgee_backup"</span>,
  selectors <span class='op'>=</span> <span class='cn'>NULL</span>,
  quiet <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Earth Engine table (ee$FeatureCollection) to be converted into a sf
object.</p></td>
    </tr>
    <tr>
      <th>dsn</th>
      <td><p>Character. Output filename; in case <code>dsn</code> is missing
<code>ee_as_sf</code> will create a shapefile file in tmp() directory.</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>Logical. Delete data source <code>dsn</code> before attempting
to write?.</p></td>
    </tr>
    <tr>
      <th>crs</th>
      <td><p>Integer or character. coordinate reference system
for the EE table. If is NULL, <code>ee_as_sf</code> will take the CRS of
the first element.</p></td>
    </tr>
    <tr>
      <th>via</th>
      <td><p>Character. Method to fetch data about the object. Multiple
options supported. See details.</p></td>
    </tr>
    <tr>
      <th>maxFeatures</th>
      <td><p>Numeric. The maximum allowed number of features to
export (ignore if <code>via</code> is not set as "getInfo"). The task will fail
if the exported region covers more features. Defaults to 5000.</p></td>
    </tr>
    <tr>
      <th>container</th>
      <td><p>Character. Name of the folder ('drive') or bucket ('gcs')
to be exported into (ignore if <code>via</code> is not defined as "drive" or
"gcs").</p></td>
    </tr>
    <tr>
      <th>selectors</th>
      <td><p>The list of properties to include in the output, as a
list of strings or a comma-separated string. By default, all properties are
included.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>logical. Suppress info message</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An sf object.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>ee_as_sf</code> supports the download of <code>ee$FeatureCollection</code>,
<code>ee$Feature</code> and <code>ee$Geometry</code> by three different options:
"getInfo", "drive", and "gcs". When "getInfo" is set in the <code>via</code>
argument, <code>ee_as_sf</code> will make an REST call to retrieve
all the known information about the object. The advantage of use
"getInfo" is a direct and faster download. However, there is a limitation of
5000 features by request which makes it not recommendable for large
collections. Instead of "getInfo", the options: "drive" and "gcs" are
suitable for large collections since they use an intermediate container,
which may be Google Drive and Google Cloud Storage respectively. For getting
more information about exporting data from Earth Engine, take a look at the
<a href='https://developers.google.com/earth-engine/exporting'>Google
Earth Engine Guide - Export data</a>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/r-spatial/rgee'>rgee</a></span><span class='op'>)</span>

<span class='fu'><a href='ee_Initialize.html'>ee_Initialize</a></span><span class='op'>(</span>drive <span class='op'>=</span> <span class='cn'>TRUE</span>, gcs <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># Region of interest</span>
<span class='va'>roi</span> <span class='op'>&lt;-</span> <span class='va'>ee</span><span class='op'>$</span><span class='va'>Geometry</span><span class='op'>$</span><span class='fu'>Polygon</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>122.275</span>, <span class='fl'>37.891</span><span class='op'>)</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>122.275</span>, <span class='fl'>37.868</span><span class='op'>)</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>122.240</span>, <span class='fl'>37.868</span><span class='op'>)</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>122.240</span>, <span class='fl'>37.891</span><span class='op'>)</span>
<span class='op'>)</span><span class='op'>)</span>

<span class='co'># TIGER: US Census Blocks Dataset</span>
<span class='va'>blocks</span> <span class='op'>&lt;-</span> <span class='va'>ee</span><span class='op'>$</span><span class='fu'>FeatureCollection</span><span class='op'>(</span><span class='st'>"TIGER/2010/Blocks"</span><span class='op'>)</span>
<span class='va'>subset</span> <span class='op'>&lt;-</span> <span class='va'>blocks</span><span class='op'>$</span><span class='fu'>filterBounds</span><span class='op'>(</span><span class='va'>roi</span><span class='op'>)</span>
<span class='va'>sf_subset</span> <span class='op'>&lt;-</span> <span class='fu'>ee_as_sf</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>subset</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>sf_subset</span><span class='op'>)</span>

<span class='co'># Create Random points in Earth Engine</span>
<span class='va'>region</span> <span class='op'>&lt;-</span> <span class='va'>ee</span><span class='op'>$</span><span class='va'>Geometry</span><span class='op'>$</span><span class='fu'>Rectangle</span><span class='op'>(</span><span class='op'>-</span><span class='fl'>119.224</span>, <span class='fl'>34.669</span>, <span class='op'>-</span><span class='fl'>99.536</span>, <span class='fl'>50.064</span><span class='op'>)</span>
<span class='fu'><a href='ee_help.html'>ee_help</a></span><span class='op'>(</span><span class='va'>ee</span><span class='op'>$</span><span class='va'>FeatureCollection</span><span class='op'>$</span><span class='va'>randomPoints</span><span class='op'>)</span>
<span class='va'>ee_randomPoints</span> <span class='op'>&lt;-</span> <span class='va'>ee</span><span class='op'>$</span><span class='va'>FeatureCollection</span><span class='op'>$</span><span class='fu'>randomPoints</span><span class='op'>(</span><span class='va'>region</span>, <span class='fl'>100</span><span class='op'>)</span>

<span class='co'># Download via GetInfo</span>
<span class='va'>sf_randomPoints</span> <span class='op'>&lt;-</span> <span class='fu'>ee_as_sf</span><span class='op'>(</span><span class='va'>ee_randomPoints</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>sf_randomPoints</span><span class='op'>)</span>

<span class='co'># Download via drive</span>
<span class='va'>sf_randomPoints_drive</span> <span class='op'>&lt;-</span> <span class='fu'>ee_as_sf</span><span class='op'>(</span>
  x <span class='op'>=</span> <span class='va'>ee_randomPoints</span>,
  via <span class='op'>=</span> <span class='st'>'drive'</span>
<span class='op'>)</span>

<span class='co'># Download via GCS</span>
<span class='co'># sf_randomPoints_gcs &lt;- ee_as_sf(</span>
<span class='co'>#   x = subset,</span>
<span class='co'>#   via = 'gcs',</span>
<span class='co'>#   container = 'rgee_dev' #GCS bucket name</span>
<span class='co'># )</span>
<span class='op'>}</span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Cesar Aybar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


